<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Web to Figma</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">
        <span class="brand-html">HTML</span>
        <span class="brand-figma">Figma</span>
      </div>
      <div class="header-actions">
        <button class="btn-upgrade" type="button">Upgrade to Pro</button>
        <button class="btn-help" type="button" title="Help & Documentation">?</button>
      </div>
    </header>

    <div class="capture-preview" id="capture-preview">
      <div class="preview-header">
        <span class="preview-title">ðŸŽ¯ Capturing...</span>
        <span class="preview-status" id="preview-status">Initializing</span>
      </div>
      <div class="preview-viewport">
        <canvas class="preview-canvas" id="preview-canvas"></canvas>
        <div class="laser-scan" id="laser-scan"></div>
        <!-- Circular Progress Ring Overlay -->
        <div class="progress-ring-overlay" id="progress-ring-overlay">
          <div class="progress-ring-container">
            <svg class="progress-ring" width="120" height="120">
             <defs>
                <linearGradient id="progress-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#00d4aa"/>
                  <stop offset="100%" stop-color="#00bcd4"/>
                </linearGradient>
              </defs>
              <circle class="progress-ring-bg" cx="60" cy="60" r="54"></circle>
              <circle class="progress-ring-fill" cx="60" cy="60" r="54"></circle>
            </svg>
            <div class="progress-text">
              <div class="progress-percent">0%</div>
              <div class="progress-label">Ready</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sign In CTA -->
    <div class="sign-in-section">
      <button class="btn-sign-in" id="sign-in-btn" type="button">Sign In</button>
    </div>

    <div class="capture-grid">
      <!-- Full Page Capture -->
      <button class="capture-card" id="capture-full-page">
        <div class="card-icon">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <rect x="8" y="12" width="48" height="40" rx="4" fill="url(#gradient1)" opacity="0.2"/>
            <rect x="12" y="16" width="40" height="8" rx="2" fill="url(#gradient1)"/>
            <circle cx="16" cy="28" r="2" fill="url(#gradient1)"/>
            <circle cx="22" cy="28" r="2" fill="url(#gradient1)"/>
            <rect x="12" y="32" width="18" height="4" rx="2" fill="url(#gradient1)"/>
            <rect x="12" y="38" width="40" height="4" rx="2" fill="url(#gradient1)" opacity="0.6"/>
            <rect x="12" y="44" width="32" height="4" rx="2" fill="url(#gradient1)" opacity="0.4"/>
            <defs>
              <linearGradient id="gradient1" x1="0" y1="0" x2="64" y2="64">
                <stop offset="0%" stop-color="#00d4aa"/>
                <stop offset="100%" stop-color="#00bcd4"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="card-content">
          <h3 class="card-title">Capture Current Page</h3>
          <p class="card-subtitle">Process entire document</p>
        </div>
      </button>

      <!-- Component Capture -->
      <button class="capture-card" id="capture-component">
        <div class="card-icon">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <rect x="16" y="16" width="32" height="32" rx="4" fill="url(#gradient2)" opacity="0.2" stroke="url(#gradient2)" stroke-width="2" stroke-dasharray="4 4"/>
            <rect x="20" y="20" width="24" height="24" rx="2" fill="url(#gradient2)"/>
            <defs>
              <linearGradient id="gradient2" x1="0" y1="0" x2="64" y2="64">
                <stop offset="0%" stop-color="#00d4aa"/>
                <stop offset="100%" stop-color="#00bcd4"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="card-content">
          <h3 class="card-title">Select & Capture</h3>
          <p class="card-subtitle">a component</p>
        </div>
      </button>

      <!-- Download Capture (New) -->
      <button class="capture-card" id="capture-download">
        <div class="card-icon">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <path d="M32 12V44M32 44L20 32M32 44L44 32" stroke="url(#gradient4)" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 52H52" stroke="url(#gradient4)" stroke-width="4" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradient4" x1="0" y1="0" x2="64" y2="64">
                <stop offset="0%" stop-color="#00d4aa"/>
                <stop offset="100%" stop-color="#00bcd4"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="card-content">
          <h3 class="card-title">Download Capture</h3>
          <p class="card-subtitle">Save as .json file</p>
        </div>
      </button>

      <!-- Multiple Pages (Pro) -->
      <button class="capture-card pro-feature" id="capture-multiple" disabled>
        <span class="pro-badge">Pro</span>
        <div class="card-icon">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <rect x="12" y="18" width="20" height="28" rx="3" fill="url(#gradient3)" opacity="0.3"/>
            <rect x="22" y="18" width="20" height="28" rx="3" fill="url(#gradient3)" opacity="0.6"/>
            <rect x="32" y="18" width="20" height="28" rx="3" fill="url(#gradient3)"/>
            <path d="M36 28h8m-8 4h8m-8 4h6" stroke="white" stroke-width="2" stroke-linecap="round" opacity="0.8"/>
            <defs>
              <linearGradient id="gradient3" x1="0" y1="0" x2="64" y2="64">
                <stop offset="0%" stop-color="#00d4aa"/>
                <stop offset="100%" stop-color="#00bcd4"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="card-content">
          <h3 class="card-title">Capture</h3>
          <p class="card-subtitle">Multiple Pages</p>
        </div>
      </button>
    </div>

    <!-- Terminal / Progress Log -->
    <div class="terminal hidden" id="terminal">
      <div class="terminal-header">
        <div class="terminal-title">
          <span class="terminal-icon">â–¶</span>
          <span>Capture Progress</span>
        </div>
        <div class="terminal-controls">
          <button class="terminal-btn" id="terminal-clear" title="Clear">âœ•</button>
          <button class="terminal-btn" id="terminal-minimize" title="Minimize">âˆ’</button>
        </div>
      </div>
      <div class="terminal-body" id="terminal-body">
        <div class="terminal-log" id="terminal-log"></div>
      </div>
      <div class="terminal-footer">
        <span class="terminal-stats" id="terminal-stats">Ready</span>
      </div>
    </div>

    <!-- Debug Controls Removed -->
    
    <!-- Connection Status Panel Removed -->

    <!-- Capture complete dialog -->
    <div class="capture-dialog hidden" id="capture-dialog" role="alert">
      <div class="dialog-content">
        <div class="dialog-icon">âœ…</div>
        <div class="dialog-text">
          <div class="dialog-title">Capture complete!</div>
          <div class="dialog-subtitle">Sent to Figma</div>
        </div>
      </div>
      <button class="dialog-close" id="capture-dialog-close" type="button">Close</button>
    </div>

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Success Modal Dialog -->
    <div class="modal hidden" id="success-modal">
      <div class="modal-overlay" id="success-modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-icon success">
            <span class="progress-icon success">âœ“</span>
          </div>
          <div class="modal-title">Capture Complete!</div>
          <div class="modal-description">
            Your page has been successfully captured and sent to Figma
          </div>
        </div>
        
        <div class="modal-details">
          <div class="modal-details-title">CAPTURE DETAILS</div>
          <div class="modal-detail-item">
            <span class="modal-detail-label">Viewport</span>
            <span class="modal-detail-value" id="detail-viewport">-</span>
          </div>
          <div class="modal-detail-item">
            <span class="modal-detail-label">Payload Size</span>
            <span class="modal-detail-value" id="detail-size">-</span>
          </div>
          <div class="modal-detail-item">
            <span class="modal-detail-label">Elements</span>
            <span class="modal-detail-value" id="detail-elements">-</span>
          </div>
          <div class="modal-detail-item">
            <span class="modal-detail-label">Duration</span>
            <span class="modal-detail-value" id="detail-duration">-</span>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn btn-ghost w-full" id="close-modal">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
